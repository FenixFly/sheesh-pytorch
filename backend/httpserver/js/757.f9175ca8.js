(self["webpackChunksheesh"]=self["webpackChunksheesh"]||[]).push([[757],{1757:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var n=a(3673),d=a(2323);const o=(0,n.HX)("data-v-79ff3d9c");(0,n.dD)("data-v-79ff3d9c");const i=(0,n.uE)('<button id="start-camera" data-v-79ff3d9c>Start Camera</button><video id="video" width="180" height="180" autoplay="" data-v-79ff3d9c></video><button id="start-record" data-v-79ff3d9c>Start Recording</button><button id="stop-record" data-v-79ff3d9c>Stop Recording</button><a id="download-video" download="test.webm" data-v-79ff3d9c>Download Video</a><canvas height="10" width="10" id="canvas" data-v-79ff3d9c></canvas>',6),c=(0,n.Wm)("h3",null,"draw",-1),s=(0,n.Wm)("br",null,null,-1),l=(0,n.Wm)("br",null,null,-1);(0,n.Cn)();const r=o(((e,t,a,o,r,u)=>((0,n.wg)(),(0,n.j4)(n.HY,null,[i,(0,n.Wm)("div",{onClick:t[1]||(t[1]=e=>u.getImage())},[c,(0,n.Uk)(" "+(0,d.zw)(e.count),1),s,(0,n.Uk)(" "+(0,d.zw)(e.countFrames),1),l,(0,n.Uk)(" интенсивность: "+(0,d.zw)(e.intens),1)])],64))));a(71),a(7965),a(107);const u={name:"Camera",data:()=>({video:null,canvas:null,lastIntens:0,count:0,countFrames:0,interval:null,intens:0}),mounted(){let e=document.querySelector("#start-camera"),t=document.querySelector("#video"),a=document.querySelector("#start-record"),n=document.querySelector("#stop-record"),d=document.querySelector("#download-video"),o=null,i=null,c=[];e.addEventListener("click",(async function(){try{o=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:180},height:{ideal:180}},frameRate:{ideal:180},audio:!1})}catch(n){return void alert(n.message)}t.srcObject=o,e.style.display="none",t.style.display="block",a.style.display="block"})),a.addEventListener("click",(function(){i=new MediaRecorder(o,{mimeType:"video/webm"}),i.addEventListener("dataavailable",(function(e){c.push(e.data)})),i.addEventListener("stop",(function(){let e=URL.createObjectURL(new Blob(c,{type:"video/webm"}));d.href=e,n.style.display="none",d.style.display="block"})),i.start(1e3),a.style.display="none",n.style.display="block"})),n.addEventListener("click",(function(){})),this.video=document.getElementById("video"),this.canvas=document.getElementById("canvas")},methods:{getImage(){let e=document.getElementById("video"),t=document.getElementById("canvas");this.count+=1,t.getContext("2d").drawImage(e,0,0,t.width,t.height),console.log("canvas.width, canvas.height",t.width,t.height);let a=t.getContext("2d").getImageData(0,0,t.width,t.height).data;this.intens=a.reduce(((e,t)=>e+t),0),this.lastIntens!==this.intens&&(this.lastIntens=this.intens,this.countFrames+=1),setTimeout(this.getImage,0)},async getImageTest(){this.count+=1;let e=document.getElementById("video"),t=document.getElementById("video").srcObject.getVideoTracks()[0],a=new ImageCapture(t),n=await a.grabFrame();window.frame=n,console.log("track",t),console.log("imageCapture",a),console.log("frame",n);document.getElementById("canvas");return console.log("video",e),0}}};u.render=r,u.__scopeId="data-v-79ff3d9c";const m=u}}]);